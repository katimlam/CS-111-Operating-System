Ka Tim Lam
104477818

This project includes the following files:
Makefile
	make: compile the executable
	make clean: clear all executables and files created when compiling
	mmake dist: create a tarball
README 
	answers to the questions and gprof analysis
lab2c.c 
	the main function
SortedList.c
SortedList.h 
	implementation of the Sorteslist functions
graph1.png 
	graph showing the corrected average cost per operation as a function
	of thread-to-list ratio.

--------------------------------------------------------------------------------

1A. The performance is fast when # of threads <= # of lists, an is slow when # of threads > # of lists.
The average cost per operation is small when the ratio is less than 1 and increases when the ratio 
becomes greater than 1. This happend because when the thread-to-list is small, there are few threads
competing for a larger number of lists. The probability different threads waiting for a lock is minimized.

1B. The thread per list value can show how intense a number of threads sharing a number of lists.
Since lists have their own locks, performance depends on the probability of conflicts between threads fighting
for the same lock. When the number of threads is equal to the number of lists, in average, each thread can use a
lock at the same time. Performance is fast at this situation, and when there are more lists than threads, performance
is even slightly better.

2A. When lists value increases, time per operation decreases because each sublist has fewer elements, the time spent
on inserting and looking up a specific element is reduced.

2B. Spin lock slightly performs better than mutex. A probable reason for that is that the frequency of threads waiting
for a lock is low. The time spent on spinning is less than mutex putting a thread to sleep then waking it up.

3A. If mutex is not held, there is a chance of for the pthread_cond_wait to put the thread to sleep forever. For instance,
when the mutex is not held, right before pthread_cond_wait, pthread_cond_signal is called, then pthread_cond_wait put the thread
to sleep. It will never be woken up again since.

3B. It has to release the mutex for other threads to operate, otherwise the other threads can never call pthread_cond_signal and wake
it up. The thread just cannnot hold the mutex and sleep.

3C. It has to ensure that other threads are not changing the condition again at the instance.

3D. Releasing the mutex inside pthread_cond_wait ensures atomicity of unlock and sleep. If another call pthread_cond_signal
after unlock and before sleep, the caller will be put to sleep forever.

3E. It can only be implemented by a system call to ensure the atomicity of the operation inside, meaning the operation of the
pthread_cond_wait function cannont be interrupted.

--------------------------------------------------------------------------------
-----------------------------------GPROF REPORT---------------------------------
--------------------------------------------------------------------------------
$ ./lab2c --iterations=1000 --threads=1 --lists=1

Each sample counts as 0.01 seconds.
 no time accumulated

  %   cumulative   self              self     total
 time   seconds   seconds    calls  Ts/call  Ts/call  name
  0.00      0.00     0.00     2001     0.00     0.00  LOCK
  0.00      0.00     0.00     2001     0.00     0.00  UNLOCK
  0.00      0.00     0.00     2000     0.00     0.00  hash_function
  0.00      0.00     0.00     1000     0.00     0.00  SortedList_delete
  0.00      0.00     0.00     1000     0.00     0.00  SortedList_insert
  0.00      0.00     0.00     1000     0.00     0.00  SortedList_lookup
  0.00      0.00     0.00     1000     0.00     0.00  str_randomize
  0.00      0.00     0.00        2     0.00     0.00  SortedList_length

                        Call graph


granularity: each sample hit covers 2 byte(s) no time propagated

index % time    self  children    called     name
                0.00    0.00    2001/2001        thread_function [18]
[1]      0.0    0.00    0.00    2001         LOCK [1]
-----------------------------------------------
                0.00    0.00    2001/2001        thread_function [18]
[2]      0.0    0.00    0.00    2001         UNLOCK [2]
-----------------------------------------------
                0.00    0.00    2000/2000        thread_function [18]
[3]      0.0    0.00    0.00    2000         hash_function [3]
-----------------------------------------------
                0.00    0.00    1000/1000        thread_function [18]
[4]      0.0    0.00    0.00    1000         SortedList_delete [4]
-----------------------------------------------
                0.00    0.00    1000/1000        thread_function [18]
[5]      0.0    0.00    0.00    1000         SortedList_insert [5]
-----------------------------------------------
                0.00    0.00    1000/1000        thread_function [18]
[6]      0.0    0.00    0.00    1000         SortedList_lookup [6]
-----------------------------------------------
                0.00    0.00    1000/1000        main [16]
[7]      0.0    0.00    0.00    1000         str_randomize [7]
-----------------------------------------------
                0.00    0.00       1/2           thread_function [18]
                0.00    0.00       1/2           main [16]
[8]      0.0    0.00    0.00       2         SortedList_length [8]
-----------------------------------------------

Index by function name

   [1] LOCK                    [8] SortedList_length       [3] hash_function
   [4] SortedList_delete       [6] SortedList_lookup       [7] str_randomize
   [5] SortedList_insert       [2] UNLOCK
--------------------------------------------------------------------------------
--------------------------------------------------------------------------------
--------------------------------------------------------------------------------
$ ./lab2c --iterations=10000 --threads=1 --lists=1
Flat profile:

Each sample counts as 0.01 seconds.
  %   cumulative   self              self     total
 time   seconds   seconds    calls  us/call  us/call  name
 62.62      0.05     0.05    10000     5.01     5.01  SortedList_lookup
 37.57      0.08     0.03    10000     3.01     3.01  SortedList_insert
  0.00      0.08     0.00    20001     0.00     0.00  LOCK
  0.00      0.08     0.00    20001     0.00     0.00  UNLOCK
  0.00      0.08     0.00    20000     0.00     0.00  hash_function
  0.00      0.08     0.00    10000     0.00     0.00  SortedList_delete
  0.00      0.08     0.00    10000     0.00     0.00  str_randomize
  0.00      0.08     0.00        2     0.00     0.00  SortedList_length

                        Call graph


granularity: each sample hit covers 2 byte(s) for 12.48% of 0.08 seconds

index % time    self  children    called     name
                                                 <spontaneous>
[1]    100.0    0.00    0.08                 thread_function [1]
                0.05    0.00   10000/10000       SortedList_lookup [2]
                0.03    0.00   10000/10000       SortedList_insert [3]
                0.00    0.00   20001/20001       LOCK [4]
                0.00    0.00   20001/20001       UNLOCK [5]
                0.00    0.00   20000/20000       hash_function [6]
                0.00    0.00   10000/10000       SortedList_delete [7]
                0.00    0.00       1/2           SortedList_length [9]
-----------------------------------------------
                0.05    0.00   10000/10000       thread_function [1]
[2]     62.5    0.05    0.00   10000         SortedList_lookup [2]
-----------------------------------------------
                0.03    0.00   10000/10000       thread_function [1]
[3]     37.5    0.03    0.00   10000         SortedList_insert [3]
-----------------------------------------------
                0.00    0.00   20001/20001       thread_function [1]
[4]      0.0    0.00    0.00   20001         LOCK [4]
-----------------------------------------------
                0.00    0.00   20001/20001       thread_function [1]
[5]      0.0    0.00    0.00   20001         UNLOCK [5]
-----------------------------------------------
                0.00    0.00   20000/20000       thread_function [1]
[6]      0.0    0.00    0.00   20000         hash_function [6]
-----------------------------------------------
                0.00    0.00   10000/10000       thread_function [1]
[7]      0.0    0.00    0.00   10000         SortedList_delete [7]
-----------------------------------------------
                0.00    0.00   10000/10000       main [17]
[8]      0.0    0.00    0.00   10000         str_randomize [8]
-----------------------------------------------
                0.00    0.00       1/2           thread_function [1]
                0.00    0.00       1/2           main [17]
[9]      0.0    0.00    0.00       2         SortedList_length [9]
-----------------------------------------------

Index by function name

   [4] LOCK                    [9] SortedList_length       [6] hash_function
   [7] SortedList_delete       [2] SortedList_lookup       [8] str_randomize
   [3] SortedList_insert       [5] UNLOCK
--------------------------------------------------------------------------------
--------------------------------------------------------------------------------
--------------------------------------------------------------------------------
$ ./lab2c --iterations=100000 --threads=1 --lists=1
Flat profile:

Each sample counts as 0.01 seconds.
  %   cumulative   self              self     total
 time   seconds   seconds    calls  us/call  us/call  name
 52.81     31.61    31.61   100000   316.12   316.12  SortedList_insert
 47.39     59.98    28.37   100000   283.65   283.65  SortedList_lookup
  0.00     59.98     0.00   200001     0.00     0.00  LOCK
  0.00     59.98     0.00   200001     0.00     0.00  UNLOCK
  0.00     59.98     0.00   200000     0.00     0.00  hash_function
  0.00     59.98     0.00   100000     0.00     0.00  SortedList_delete
  0.00     59.98     0.00   100000     0.00     0.00  str_randomize
  0.00     59.98     0.00        2     0.00     0.00  SortedList_length

                        Call graph


granularity: each sample hit covers 2 byte(s) for 0.02% of 59.98 seconds

index % time    self  children    called     name
                                                 <spontaneous>
[1]    100.0    0.00   59.98                 thread_function [1]
               31.61    0.00  100000/100000      SortedList_insert [2]
               28.37    0.00  100000/100000      SortedList_lookup [3]
                0.00    0.00  200001/200001      LOCK [4]
                0.00    0.00  200001/200001      UNLOCK [5]
                0.00    0.00  200000/200000      hash_function [6]
                0.00    0.00  100000/100000      SortedList_delete [7]
                0.00    0.00       1/2           SortedList_length [9]
-----------------------------------------------
               31.61    0.00  100000/100000      thread_function [1]
[2]     52.7   31.61    0.00  100000         SortedList_insert [2]
-----------------------------------------------
               28.37    0.00  100000/100000      thread_function [1]
[3]     47.3   28.37    0.00  100000         SortedList_lookup [3]
-----------------------------------------------
                0.00    0.00  200001/200001      thread_function [1]
[4]      0.0    0.00    0.00  200001         LOCK [4]
-----------------------------------------------
                0.00    0.00  200001/200001      thread_function [1]
[5]      0.0    0.00    0.00  200001         UNLOCK [5]
-----------------------------------------------
                0.00    0.00  200000/200000      thread_function [1]
[6]      0.0    0.00    0.00  200000         hash_function [6]
-----------------------------------------------
                0.00    0.00  100000/100000      thread_function [1]
[7]      0.0    0.00    0.00  100000         SortedList_delete [7]
-----------------------------------------------
                0.00    0.00  100000/100000      main [17]
[8]      0.0    0.00    0.00  100000         str_randomize [8]
-----------------------------------------------
                0.00    0.00       1/2           thread_function [1]
                0.00    0.00       1/2           main [17]
[9]      0.0    0.00    0.00       2         SortedList_length [9]
-----------------------------------------------

Index by function name

   [4] LOCK                    [9] SortedList_length       [6] hash_function
   [7] SortedList_delete       [3] SortedList_lookup       [8] str_randomize
   [2] SortedList_insert       [5] UNLOCK
--------------------------------------------------------------------------------
--------------------------------------------------------------------------------
--------------------------------------------------------------------------------
$ ./lab2c --iterations=10000 --threads=8 --lists=1 --sync=m

Flat profile:

Each sample counts as 0.01 seconds.
  %   cumulative   self              self     total           
 time   seconds   seconds    calls  ms/call  ms/call  name    
 50.95     17.95    17.95    79999     0.22     0.22  SortedList_lookup
 49.10     35.26    17.30    79990     0.22     0.22  SortedList_insert
  0.09     35.29     0.03                             thread_function
  0.03     35.30     0.01        9     1.11     1.11  SortedList_length
  0.01     35.30     0.01   159995     0.00     0.00  UNLOCK
  0.01     35.31     0.01   159933     0.00     0.00  hash_function
  0.00     35.31     0.00   159936     0.00     0.00  LOCK
  0.00     35.31     0.00    80000     0.00     0.00  SortedList_delete
  0.00     35.31     0.00    80000     0.00     0.00  str_randomize

			Call graph


granularity: each sample hit covers 2 byte(s) for 0.03% of 35.31 seconds

index % time    self  children    called     name
                                                 <spontaneous>
[1]    100.0    0.03   35.28                 thread_function [1]
               17.95    0.00   79999/79999       SortedList_lookup [2]
               17.30    0.00   79990/79990       SortedList_insert [3]
                0.01    0.00       8/9           SortedList_length [4]
                0.01    0.00  159995/159995      UNLOCK [5]
                0.01    0.00  159933/159933      hash_function [6]
                0.00    0.00  159936/159936      LOCK [8]
                0.00    0.00   80000/80000       SortedList_delete [9]
-----------------------------------------------
               17.95    0.00   79999/79999       thread_function [1]
[2]     50.9   17.95    0.00   79999         SortedList_lookup [2]
-----------------------------------------------
               17.30    0.00   79990/79990       thread_function [1]
[3]     49.0   17.30    0.00   79990         SortedList_insert [3]
-----------------------------------------------
                0.00    0.00       1/9           main [7]
                0.01    0.00       8/9           thread_function [1]
[4]      0.0    0.01    0.00       9         SortedList_length [4]
-----------------------------------------------
                0.01    0.00  159995/159995      thread_function [1]
[5]      0.0    0.01    0.00  159995         UNLOCK [5]
-----------------------------------------------
                0.01    0.00  159933/159933      thread_function [1]
[6]      0.0    0.01    0.00  159933         hash_function [6]
-----------------------------------------------
                                                 <spontaneous>
[7]      0.0    0.00    0.00                 main [7]
                0.00    0.00       1/9           SortedList_length [4]
                0.00    0.00   80000/80000       str_randomize [10]
-----------------------------------------------
                0.00    0.00  159936/159936      thread_function [1]
[8]      0.0    0.00    0.00  159936         LOCK [8]
-----------------------------------------------
                0.00    0.00   80000/80000       thread_function [1]
[9]      0.0    0.00    0.00   80000         SortedList_delete [9]
-----------------------------------------------
                0.00    0.00   80000/80000       main [7]
[10]     0.0    0.00    0.00   80000         str_randomize [10]
-----------------------------------------------

Index by function name

   [8] LOCK                    [4] SortedList_length       [6] hash_function
   [9] SortedList_delete       [2] SortedList_lookup      [10] str_randomize
   [3] SortedList_insert       [5] UNLOCK                  [1] thread_function
--------------------------------------------------------------------------------
--------------------------------------------------------------------------------
--------------------------------------------------------------------------------
$ ./lab2c --iterations=10000 --threads=8 --lists=4 --sync=m

Flat profile:

Each sample counts as 0.01 seconds.
  %   cumulative   self              self     total           
 time   seconds   seconds    calls  us/call  us/call  name    
 51.17      6.43     6.43    78079    82.38    82.38  SortedList_lookup
 48.62     12.54     6.11    78289    78.07    78.07  SortedList_insert
  0.24     12.57     0.03                             thread_function
  0.08     12.58     0.01   156490     0.06     0.06  LOCK
  0.08     12.59     0.01       36   278.32   278.32  SortedList_length
  0.00     12.59     0.00   155563     0.00     0.00  UNLOCK
  0.00     12.59     0.00   155537     0.00     0.00  hash_function
  0.00     12.59     0.00    80000     0.00     0.00  str_randomize
  0.00     12.59     0.00    77985     0.00     0.00  SortedList_delete

			Call graph


granularity: each sample hit covers 2 byte(s) for 0.08% of 12.59 seconds

index % time    self  children    called     name
                                                 <spontaneous>
[1]    100.0    0.03   12.56                 thread_function [1]
                6.43    0.00   78079/78079       SortedList_lookup [2]
                6.11    0.00   78289/78289       SortedList_insert [3]
                0.01    0.00  156490/156490      LOCK [4]
                0.01    0.00      32/36          SortedList_length [5]
                0.00    0.00  155563/155563      UNLOCK [7]
                0.00    0.00  155537/155537      hash_function [8]
                0.00    0.00   77985/77985       SortedList_delete [10]
-----------------------------------------------
                6.43    0.00   78079/78079       thread_function [1]
[2]     51.1    6.43    0.00   78079         SortedList_lookup [2]
-----------------------------------------------
                6.11    0.00   78289/78289       thread_function [1]
[3]     48.5    6.11    0.00   78289         SortedList_insert [3]
-----------------------------------------------
                0.01    0.00  156490/156490      thread_function [1]
[4]      0.1    0.01    0.00  156490         LOCK [4]
-----------------------------------------------
                0.00    0.00       4/36          main [6]
                0.01    0.00      32/36          thread_function [1]
[5]      0.1    0.01    0.00      36         SortedList_length [5]
-----------------------------------------------
                                                 <spontaneous>
[6]      0.0    0.00    0.00                 main [6]
                0.00    0.00       4/36          SortedList_length [5]
                0.00    0.00   80000/80000       str_randomize [9]
-----------------------------------------------
                0.00    0.00  155563/155563      thread_function [1]
[7]      0.0    0.00    0.00  155563         UNLOCK [7]
-----------------------------------------------
                0.00    0.00  155537/155537      thread_function [1]
[8]      0.0    0.00    0.00  155537         hash_function [8]
-----------------------------------------------
                0.00    0.00   80000/80000       main [6]
[9]      0.0    0.00    0.00   80000         str_randomize [9]
-----------------------------------------------
                0.00    0.00   77985/77985       thread_function [1]
[10]     0.0    0.00    0.00   77985         SortedList_delete [10]
-----------------------------------------------

Index by function name

   [4] LOCK                    [5] SortedList_length       [8] hash_function
  [10] SortedList_delete       [2] SortedList_lookup       [9] str_randomize
   [3] SortedList_insert       [7] UNLOCK                  [1] thread_function
--------------------------------------------------------------------------------
--------------------------------------------------------------------------------
--------------------------------------------------------------------------------
$ ./lab2c --iterations=10000 --threads=8 --lists=8 --sync=m

Flat profile:

Each sample counts as 0.01 seconds.
  %   cumulative   self              self     total           
 time   seconds   seconds    calls  us/call  us/call  name    
 50.00      2.58     2.58    74674    34.48    34.48  SortedList_lookup
 49.42      5.12     2.54    75133    33.87    33.87  SortedList_insert
  0.58      5.15     0.03       72   417.48   417.48  SortedList_length
  0.19      5.16     0.01                             thread_function
  0.00      5.16     0.00   149922     0.00     0.00  LOCK
  0.00      5.16     0.00   148008     0.00     0.00  hash_function
  0.00      5.16     0.00   147975     0.00     0.00  UNLOCK
  0.00      5.16     0.00    80000     0.00     0.00  str_randomize
  0.00      5.16     0.00    74511     0.00     0.00  SortedList_delete

			Call graph


granularity: each sample hit covers 2 byte(s) for 0.19% of 5.16 seconds

index % time    self  children    called     name
                                                 <spontaneous>
[1]     99.9    0.01    5.15                 thread_function [1]
                2.58    0.00   74674/74674       SortedList_lookup [2]
                2.54    0.00   75133/75133       SortedList_insert [3]
                0.03    0.00      64/72          SortedList_length [4]
                0.00    0.00  149922/149922      LOCK [6]
                0.00    0.00  148008/148008      hash_function [7]
                0.00    0.00  147975/147975      UNLOCK [8]
                0.00    0.00   74511/74511       SortedList_delete [10]
-----------------------------------------------
                2.58    0.00   74674/74674       thread_function [1]
[2]     49.9    2.58    0.00   74674         SortedList_lookup [2]
-----------------------------------------------
                2.54    0.00   75133/75133       thread_function [1]
[3]     49.3    2.54    0.00   75133         SortedList_insert [3]
-----------------------------------------------
                0.00    0.00       8/72          main [5]
                0.03    0.00      64/72          thread_function [1]
[4]      0.6    0.03    0.00      72         SortedList_length [4]
-----------------------------------------------
                                                 <spontaneous>
[5]      0.1    0.00    0.00                 main [5]
                0.00    0.00       8/72          SortedList_length [4]
                0.00    0.00   80000/80000       str_randomize [9]
-----------------------------------------------
                0.00    0.00  149922/149922      thread_function [1]
[6]      0.0    0.00    0.00  149922         LOCK [6]
-----------------------------------------------
                0.00    0.00  148008/148008      thread_function [1]
[7]      0.0    0.00    0.00  148008         hash_function [7]
-----------------------------------------------
                0.00    0.00  147975/147975      thread_function [1]
[8]      0.0    0.00    0.00  147975         UNLOCK [8]
-----------------------------------------------
                0.00    0.00   80000/80000       main [5]
[9]      0.0    0.00    0.00   80000         str_randomize [9]
-----------------------------------------------
                0.00    0.00   74511/74511       thread_function [1]
[10]     0.0    0.00    0.00   74511         SortedList_delete [10]
-----------------------------------------------

Index by function name

   [6] LOCK                    [4] SortedList_length       [7] hash_function
  [10] SortedList_delete       [2] SortedList_lookup       [9] str_randomize
   [3] SortedList_insert       [8] UNLOCK                  [1] thread_function
--------------------------------------------------------------------------------
--------------------------------------------------------------------------------
--------------------------------------------------------------------------------
$ ./lab2c --iterations=10000 --threads=8 --lists=16 --sync=m
Flat profile:

Each sample counts as 0.01 seconds.
  %   cumulative   self              self     total           
 time   seconds   seconds    calls  us/call  us/call  name    
 51.95      0.42     0.42    68038     6.19     6.19  SortedList_lookup
 43.29      0.77     0.35    69353     5.06     5.06  SortedList_insert
  3.71      0.80     0.03                             thread_function
  1.24      0.81     0.01      143    70.07    70.07  SortedList_length
  0.00      0.81     0.00   138073     0.00     0.00  LOCK
  0.00      0.81     0.00   135982     0.00     0.00  hash_function
  0.00      0.81     0.00   135834     0.00     0.00  UNLOCK
  0.00      0.81     0.00    80000     0.00     0.00  str_randomize
  0.00      0.81     0.00    67645     0.00     0.00  SortedList_delete

			Call graph


granularity: each sample hit covers 2 byte(s) for 1.23% of 0.81 seconds

index % time    self  children    called     name
                                                 <spontaneous>
[1]     99.9    0.03    0.78                 thread_function [1]
                0.42    0.00   68038/68038       SortedList_lookup [2]
                0.35    0.00   69353/69353       SortedList_insert [3]
                0.01    0.00     127/143         SortedList_length [4]
                0.00    0.00  138073/138073      LOCK [6]
                0.00    0.00  135982/135982      hash_function [7]
                0.00    0.00  135834/135834      UNLOCK [8]
                0.00    0.00   67645/67645       SortedList_delete [10]
-----------------------------------------------
                0.42    0.00   68038/68038       thread_function [1]
[2]     51.9    0.42    0.00   68038         SortedList_lookup [2]
-----------------------------------------------
                0.35    0.00   69353/69353       thread_function [1]
[3]     43.2    0.35    0.00   69353         SortedList_insert [3]
-----------------------------------------------
                0.00    0.00      16/143         main [5]
                0.01    0.00     127/143         thread_function [1]
[4]      1.2    0.01    0.00     143         SortedList_length [4]
-----------------------------------------------
                                                 <spontaneous>
[5]      0.1    0.00    0.00                 main [5]
                0.00    0.00      16/143         SortedList_length [4]
                0.00    0.00   80000/80000       str_randomize [9]
-----------------------------------------------
                0.00    0.00  138073/138073      thread_function [1]
[6]      0.0    0.00    0.00  138073         LOCK [6]
-----------------------------------------------
                0.00    0.00  135982/135982      thread_function [1]
[7]      0.0    0.00    0.00  135982         hash_function [7]
-----------------------------------------------
                0.00    0.00  135834/135834      thread_function [1]
[8]      0.0    0.00    0.00  135834         UNLOCK [8]
-----------------------------------------------
                0.00    0.00   80000/80000       main [5]
[9]      0.0    0.00    0.00   80000         str_randomize [9]
-----------------------------------------------
                0.00    0.00   67645/67645       thread_function [1]
[10]     0.0    0.00    0.00   67645         SortedList_delete [10]
-----------------------------------------------

Index by function name

   [6] LOCK                    [4] SortedList_length       [7] hash_function
  [10] SortedList_delete       [2] SortedList_lookup       [9] str_randomize
   [3] SortedList_insert       [8] UNLOCK                  [1] thread_function
--------------------------------------------------------------------------------
--------------------------------------------------------------------------------
--------------------------------------------------------------------------------
$ ./lab2c --iterations=10000 --threads=8 --lists=32 --sync=m
Flat profile:

Each sample counts as 0.01 seconds.
  %   cumulative   self              self     total           
 time   seconds   seconds    calls  us/call  us/call  name    
 50.10      0.20     0.20    62606     3.20     3.20  SortedList_lookup
 37.57      0.35     0.15    61709     2.44     2.44  SortedList_insert
  5.01      0.37     0.02      274    73.13    73.13  SortedList_length
  2.50      0.38     0.01   125385     0.08     0.08  LOCK
  2.50      0.39     0.01   123346     0.08     0.08  hash_function
  2.50      0.40     0.01    80000     0.13     0.13  str_randomize
  0.00      0.40     0.00   122714     0.00     0.00  UNLOCK
  0.00      0.40     0.00    62175     0.00     0.00  SortedList_delete

			Call graph


granularity: each sample hit covers 2 byte(s) for 2.50% of 0.40 seconds

index % time    self  children    called     name
                                                 <spontaneous>
[1]     96.9    0.00    0.39                 thread_function [1]
                0.20    0.00   62606/62606       SortedList_lookup [2]
                0.15    0.00   61709/61709       SortedList_insert [3]
                0.02    0.00     242/274         SortedList_length [4]
                0.01    0.00  125385/125385      LOCK [6]
                0.01    0.00  123346/123346      hash_function [7]
                0.00    0.00  122714/122714      UNLOCK [9]
                0.00    0.00   62175/62175       SortedList_delete [10]
-----------------------------------------------
                0.20    0.00   62606/62606       thread_function [1]
[2]     50.0    0.20    0.00   62606         SortedList_lookup [2]
-----------------------------------------------
                0.15    0.00   61709/61709       thread_function [1]
[3]     37.5    0.15    0.00   61709         SortedList_insert [3]
-----------------------------------------------
                0.00    0.00      32/274         main [5]
                0.02    0.00     242/274         thread_function [1]
[4]      5.0    0.02    0.00     274         SortedList_length [4]
-----------------------------------------------
                                                 <spontaneous>
[5]      3.1    0.00    0.01                 main [5]
                0.01    0.00   80000/80000       str_randomize [8]
                0.00    0.00      32/274         SortedList_length [4]
-----------------------------------------------
                0.01    0.00  125385/125385      thread_function [1]
[6]      2.5    0.01    0.00  125385         LOCK [6]
-----------------------------------------------
                0.01    0.00  123346/123346      thread_function [1]
[7]      2.5    0.01    0.00  123346         hash_function [7]
-----------------------------------------------
                0.01    0.00   80000/80000       main [5]
[8]      2.5    0.01    0.00   80000         str_randomize [8]
-----------------------------------------------
                0.00    0.00  122714/122714      thread_function [1]
[9]      0.0    0.00    0.00  122714         UNLOCK [9]
-----------------------------------------------
                0.00    0.00   62175/62175       thread_function [1]
[10]     0.0    0.00    0.00   62175         SortedList_delete [10]
-----------------------------------------------

Index by function name

   [6] LOCK                    [4] SortedList_length       [7] hash_function
  [10] SortedList_delete       [2] SortedList_lookup       [8] str_randomize
   [3] SortedList_insert       [9] UNLOCK
--------------------------------------------------------------------------------
--------------------------------------------------------------------------------
--------------------------------------------------------------------------------
$ ./lab2c --iterations=10000 --threads=8 --lists=1 --sync=s
Flat profile:

Each sample counts as 0.01 seconds.
  %   cumulative   self              self     total           
 time   seconds   seconds    calls  ms/call  ms/call  name    
 95.31    540.78   540.78   157534     3.43     3.43  LOCK
  2.57    555.34    14.56    77796     0.19     0.19  SortedList_lookup
  2.31    568.47    13.13    79120     0.17     0.17  SortedList_insert
  0.00    568.48     0.01        9     1.11     1.11  SortedList_length
  0.00    568.48     0.00   160002     0.00     0.00  UNLOCK
  0.00    568.48     0.00   158857     0.00     0.00  hash_function
  0.00    568.48     0.00    80000     0.00     0.00  str_randomize
  0.00    568.48     0.00    79998     0.00     0.00  SortedList_delete

			Call graph


granularity: each sample hit covers 2 byte(s) for 0.00% of 568.48 seconds

index % time    self  children    called     name
                                                 <spontaneous>
[1]    100.0    0.00  568.47                 thread_function [1]
              540.78    0.00  157534/157534      LOCK [2]
               14.56    0.00   77796/77796       SortedList_lookup [3]
               13.13    0.00   79120/79120       SortedList_insert [4]
                0.01    0.00       8/9           SortedList_length [5]
                0.00    0.00  160002/160002      UNLOCK [7]
                0.00    0.00  158857/158857      hash_function [8]
                0.00    0.00   79998/79998       SortedList_delete [10]
-----------------------------------------------
              540.78    0.00  157534/157534      thread_function [1]
[2]     95.1  540.78    0.00  157534         LOCK [2]
-----------------------------------------------
               14.56    0.00   77796/77796       thread_function [1]
[3]      2.6   14.56    0.00   77796         SortedList_lookup [3]
-----------------------------------------------
               13.13    0.00   79120/79120       thread_function [1]
[4]      2.3   13.13    0.00   79120         SortedList_insert [4]
-----------------------------------------------
                0.00    0.00       1/9           main [6]
                0.01    0.00       8/9           thread_function [1]
[5]      0.0    0.01    0.00       9         SortedList_length [5]
-----------------------------------------------
                                                 <spontaneous>
[6]      0.0    0.00    0.00                 main [6]
                0.00    0.00       1/9           SortedList_length [5]
                0.00    0.00   80000/80000       str_randomize [9]
-----------------------------------------------
                0.00    0.00  160002/160002      thread_function [1]
[7]      0.0    0.00    0.00  160002         UNLOCK [7]
-----------------------------------------------
                0.00    0.00  158857/158857      thread_function [1]
[8]      0.0    0.00    0.00  158857         hash_function [8]
-----------------------------------------------
                0.00    0.00   80000/80000       main [6]
[9]      0.0    0.00    0.00   80000         str_randomize [9]
-----------------------------------------------
                0.00    0.00   79998/79998       thread_function [1]
[10]     0.0    0.00    0.00   79998         SortedList_delete [10]
-----------------------------------------------

Index by function name

   [2] LOCK                    [5] SortedList_length       [8] hash_function
  [10] SortedList_delete       [3] SortedList_lookup       [9] str_randomize
   [4] SortedList_insert       [7] UNLOCK
--------------------------------------------------------------------------------
--------------------------------------------------------------------------------
--------------------------------------------------------------------------------
$ ./lab2c --iterations=10000 --threads=8 --lists=4 --sync=s
Flat profile:

Each sample counts as 0.01 seconds.
  %   cumulative   self              self     total           
 time   seconds   seconds    calls  us/call  us/call  name    
 52.88     20.64    20.64   155069   133.10   133.10  LOCK
 24.41     30.17     9.53    71209   133.81   133.81  SortedList_lookup
 22.82     39.08     8.91    71919   123.85   123.85  SortedList_insert
  0.05     39.10     0.02       33   607.24   607.24  SortedList_length
  0.03     39.11     0.01                             thread_function
  0.00     39.11     0.00   156101     0.00     0.00  UNLOCK
  0.00     39.11     0.00   155579     0.00     0.00  hash_function
  0.00     39.11     0.00    80000     0.00     0.00  str_randomize
  0.00     39.11     0.00    78160     0.00     0.00  SortedList_delete

			Call graph


granularity: each sample hit covers 2 byte(s) for 0.03% of 39.11 seconds

index % time    self  children    called     name
                                                 <spontaneous>
[1]    100.0    0.01   39.09                 thread_function [1]
               20.64    0.00  155069/155069      LOCK [2]
                9.53    0.00   71209/71209       SortedList_lookup [3]
                8.91    0.00   71919/71919       SortedList_insert [4]
                0.02    0.00      29/33          SortedList_length [5]
                0.00    0.00  156101/156101      UNLOCK [7]
                0.00    0.00  155579/155579      hash_function [8]
                0.00    0.00   78160/78160       SortedList_delete [10]
-----------------------------------------------
               20.64    0.00  155069/155069      thread_function [1]
[2]     52.8   20.64    0.00  155069         LOCK [2]
-----------------------------------------------
                9.53    0.00   71209/71209       thread_function [1]
[3]     24.4    9.53    0.00   71209         SortedList_lookup [3]
-----------------------------------------------
                8.91    0.00   71919/71919       thread_function [1]
[4]     22.8    8.91    0.00   71919         SortedList_insert [4]
-----------------------------------------------
                0.00    0.00       4/33          main [6]
                0.02    0.00      29/33          thread_function [1]
[5]      0.1    0.02    0.00      33         SortedList_length [5]
-----------------------------------------------
                                                 <spontaneous>
[6]      0.0    0.00    0.00                 main [6]
                0.00    0.00       4/33          SortedList_length [5]
                0.00    0.00   80000/80000       str_randomize [9]
-----------------------------------------------
                0.00    0.00  156101/156101      thread_function [1]
[7]      0.0    0.00    0.00  156101         UNLOCK [7]
-----------------------------------------------
                0.00    0.00  155579/155579      thread_function [1]
[8]      0.0    0.00    0.00  155579         hash_function [8]
-----------------------------------------------
                0.00    0.00   80000/80000       main [6]
[9]      0.0    0.00    0.00   80000         str_randomize [9]
-----------------------------------------------
                0.00    0.00   78160/78160       thread_function [1]
[10]     0.0    0.00    0.00   78160         SortedList_delete [10]
-----------------------------------------------

Index by function name

   [2] LOCK                    [5] SortedList_length       [8] hash_function
  [10] SortedList_delete       [3] SortedList_lookup       [9] str_randomize
   [4] SortedList_insert       [7] UNLOCK                  [1] thread_function
--------------------------------------------------------------------------------
--------------------------------------------------------------------------------
--------------------------------------------------------------------------------
$ ./lab2c --iterations=10000 --threads=8 --lists=8 --sync=s
Flat profile:

Each sample counts as 0.01 seconds.
  %   cumulative   self              self     total           
 time   seconds   seconds    calls  us/call  us/call  name    
 34.19      3.60     3.60   145655    24.70    24.70  LOCK
 32.95      7.06     3.47    62844    55.16    55.16  SortedList_insert
 32.67     10.50     3.44    62558    54.94    54.94  SortedList_lookup
  0.29     10.53     0.03       59   509.47   509.47  SortedList_length
  0.10     10.54     0.01    80000     0.13     0.13  str_randomize
  0.00     10.54     0.00   147791     0.00     0.00  UNLOCK
  0.00     10.54     0.00   145812     0.00     0.00  hash_function
  0.00     10.54     0.00    73700     0.00     0.00  SortedList_delete

			Call graph


granularity: each sample hit covers 2 byte(s) for 0.09% of 10.54 seconds

index % time    self  children    called     name
                                                 <spontaneous>
[1]     99.9    0.00   10.53                 thread_function [1]
                3.60    0.00  145655/145655      LOCK [2]
                3.47    0.00   62844/62844       SortedList_insert [3]
                3.44    0.00   62558/62558       SortedList_lookup [4]
                0.03    0.00      51/59          SortedList_length [5]
                0.00    0.00  147791/147791      UNLOCK [8]
                0.00    0.00  145812/145812      hash_function [9]
                0.00    0.00   73700/73700       SortedList_delete [10]
-----------------------------------------------
                3.60    0.00  145655/145655      thread_function [1]
[2]     34.1    3.60    0.00  145655         LOCK [2]
-----------------------------------------------
                3.47    0.00   62844/62844       thread_function [1]
[3]     32.9    3.47    0.00   62844         SortedList_insert [3]
-----------------------------------------------
                3.44    0.00   62558/62558       thread_function [1]
[4]     32.6    3.44    0.00   62558         SortedList_lookup [4]
-----------------------------------------------
                0.00    0.00       8/59          main [6]
                0.03    0.00      51/59          thread_function [1]
[5]      0.3    0.03    0.00      59         SortedList_length [5]
-----------------------------------------------
                                                 <spontaneous>
[6]      0.1    0.00    0.01                 main [6]
                0.01    0.00   80000/80000       str_randomize [7]
                0.00    0.00       8/59          SortedList_length [5]
-----------------------------------------------
                0.01    0.00   80000/80000       main [6]
[7]      0.1    0.01    0.00   80000         str_randomize [7]
-----------------------------------------------
                0.00    0.00  147791/147791      thread_function [1]
[8]      0.0    0.00    0.00  147791         UNLOCK [8]
-----------------------------------------------
                0.00    0.00  145812/145812      thread_function [1]
[9]      0.0    0.00    0.00  145812         hash_function [9]
-----------------------------------------------
                0.00    0.00   73700/73700       thread_function [1]
[10]     0.0    0.00    0.00   73700         SortedList_delete [10]
-----------------------------------------------

Index by function name

   [2] LOCK                    [5] SortedList_length       [9] hash_function
  [10] SortedList_delete       [4] SortedList_lookup       [7] str_randomize
   [3] SortedList_insert       [8] UNLOCK
--------------------------------------------------------------------------------
--------------------------------------------------------------------------------
--------------------------------------------------------------------------------
$ ./lab2c --iterations=10000 --threads=8 --lists=16 --sync=s
Flat profile:

Each sample counts as 0.01 seconds.
  %   cumulative   self              self     total           
 time   seconds   seconds    calls  us/call  us/call  name    
 57.61      1.15     1.15   124798     9.23     9.23  LOCK
 22.54      1.60     0.45    56155     8.03     8.03  SortedList_insert
 19.04      1.98     0.38    52984     7.19     7.19  SortedList_lookup
  0.50      1.99     0.01   131627     0.08     0.08  hash_function
  0.50      2.00     0.01                             main
  0.00      2.00     0.00   134003     0.00     0.00  UNLOCK
  0.00      2.00     0.00    80000     0.00     0.00  str_randomize
  0.00      2.00     0.00    66273     0.00     0.00  SortedList_delete
  0.00      2.00     0.00      116     0.00     0.00  SortedList_length

			Call graph


granularity: each sample hit covers 2 byte(s) for 0.50% of 2.00 seconds

index % time    self  children    called     name
                                                 <spontaneous>
[1]     99.5    0.00    1.99                 thread_function [1]
                1.15    0.00  124798/124798      LOCK [2]
                0.45    0.00   56155/56155       SortedList_insert [3]
                0.38    0.00   52984/52984       SortedList_lookup [4]
                0.01    0.00  131627/131627      hash_function [5]
                0.00    0.00  134003/134003      UNLOCK [7]
                0.00    0.00   66273/66273       SortedList_delete [9]
                0.00    0.00     100/116         SortedList_length [10]
-----------------------------------------------
                1.15    0.00  124798/124798      thread_function [1]
[2]     57.5    1.15    0.00  124798         LOCK [2]
-----------------------------------------------
                0.45    0.00   56155/56155       thread_function [1]
[3]     22.5    0.45    0.00   56155         SortedList_insert [3]
-----------------------------------------------
                0.38    0.00   52984/52984       thread_function [1]
[4]     19.0    0.38    0.00   52984         SortedList_lookup [4]
-----------------------------------------------
                0.01    0.00  131627/131627      thread_function [1]
[5]      0.5    0.01    0.00  131627         hash_function [5]
-----------------------------------------------
                                                 <spontaneous>
[6]      0.5    0.01    0.00                 main [6]
                0.00    0.00   80000/80000       str_randomize [8]
                0.00    0.00      16/116         SortedList_length [10]
-----------------------------------------------
                0.00    0.00  134003/134003      thread_function [1]
[7]      0.0    0.00    0.00  134003         UNLOCK [7]
-----------------------------------------------
                0.00    0.00   80000/80000       main [6]
[8]      0.0    0.00    0.00   80000         str_randomize [8]
-----------------------------------------------
                0.00    0.00   66273/66273       thread_function [1]
[9]      0.0    0.00    0.00   66273         SortedList_delete [9]
-----------------------------------------------
                0.00    0.00      16/116         main [6]
                0.00    0.00     100/116         thread_function [1]
[10]     0.0    0.00    0.00     116         SortedList_length [10]
-----------------------------------------------

Index by function name

   [2] LOCK                   [10] SortedList_length       [5] hash_function
   [9] SortedList_delete       [4] SortedList_lookup       [6] main
   [3] SortedList_insert       [7] UNLOCK                  [8] str_randomize
--------------------------------------------------------------------------------
--------------------------------------------------------------------------------
--------------------------------------------------------------------------------
$ ./lab2c --iterations=10000 --threads=8 --lists=32 --sync=s
Flat profile:

Each sample counts as 0.01 seconds.
  %   cumulative   self              self     total           
 time   seconds   seconds    calls  us/call  us/call  name    
 40.59      0.32     0.32   109281     2.93     2.93  LOCK
 36.78      0.61     0.29    48905     5.94     5.94  SortedList_lookup
 20.29      0.77     0.16    51987     3.08     3.08  SortedList_insert
  2.54      0.79     0.02      218    91.92    91.92  SortedList_length
  0.00      0.79     0.00   115550     0.00     0.00  UNLOCK
  0.00      0.79     0.00   113364     0.00     0.00  hash_function
  0.00      0.79     0.00    80000     0.00     0.00  str_randomize
  0.00      0.79     0.00    57116     0.00     0.00  SortedList_delete

			Call graph


granularity: each sample hit covers 2 byte(s) for 1.26% of 0.79 seconds

index % time    self  children    called     name
                                                 <spontaneous>
[1]     99.6    0.00    0.79                 thread_function [1]
                0.32    0.00  109281/109281      LOCK [2]
                0.29    0.00   48905/48905       SortedList_lookup [3]
                0.16    0.00   51987/51987       SortedList_insert [4]
                0.02    0.00     186/218         SortedList_length [5]
                0.00    0.00  115550/115550      UNLOCK [7]
                0.00    0.00  113364/113364      hash_function [8]
                0.00    0.00   57116/57116       SortedList_delete [10]
-----------------------------------------------
                0.32    0.00  109281/109281      thread_function [1]
[2]     40.5    0.32    0.00  109281         LOCK [2]
-----------------------------------------------
                0.29    0.00   48905/48905       thread_function [1]
[3]     36.7    0.29    0.00   48905         SortedList_lookup [3]
-----------------------------------------------
                0.16    0.00   51987/51987       thread_function [1]
[4]     20.3    0.16    0.00   51987         SortedList_insert [4]
-----------------------------------------------
                0.00    0.00      32/218         main [6]
                0.02    0.00     186/218         thread_function [1]
[5]      2.5    0.02    0.00     218         SortedList_length [5]
-----------------------------------------------
                                                 <spontaneous>
[6]      0.4    0.00    0.00                 main [6]
                0.00    0.00      32/218         SortedList_length [5]
                0.00    0.00   80000/80000       str_randomize [9]
-----------------------------------------------
                0.00    0.00  115550/115550      thread_function [1]
[7]      0.0    0.00    0.00  115550         UNLOCK [7]
-----------------------------------------------
                0.00    0.00  113364/113364      thread_function [1]
[8]      0.0    0.00    0.00  113364         hash_function [8]
-----------------------------------------------
                0.00    0.00   80000/80000       main [6]
[9]      0.0    0.00    0.00   80000         str_randomize [9]
-----------------------------------------------
                0.00    0.00   57116/57116       thread_function [1]
[10]     0.0    0.00    0.00   57116         SortedList_delete [10]
-----------------------------------------------

Index by function name

   [2] LOCK                    [5] SortedList_length       [8] hash_function
  [10] SortedList_delete       [3] SortedList_lookup       [9] str_randomize
   [4] SortedList_insert       [7] UNLOCK
